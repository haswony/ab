<!DOCTYPE html>
<html>
<head>
  <!--
    If you are serving your web app in a path other than the root, change the
    href value below to reflect the base path you are serving from.

    The path provided below has to start and end with a slash "/" in order for
    it to work correctly.

    For more details:
    * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base

    This is a placeholder for base href that will be replaced by the value of
    the `--base-href` argument provided to `flutter build`.
  -->
  <base href="/">

  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="بلدروز - منصة الإعلانات المحلية">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Open Graph Meta Tags -->
  <meta property="og:site_name" content="بلدروز">
  <meta property="og:type" content="website">
  <meta property="og:title" content="بلدروز - منصة الإعلانات المحلية">
  <meta property="og:description" content="اكتشف وتصفح الإعلانات المحلية في بلدروز">
  <meta property="og:image" content="https://baladruz.com/icons/baladruz.png">
  <meta property="og:url" content="https://baladruz.com">
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@baladruz">
  <meta name="twitter:title" content="بلدروز - منصة الإعلانات المحلية">
  <meta name="twitter:description" content="اكتشف وتصفح الإعلانات المحلية في بلدروز">
  <meta name="twitter:image" content="https://baladruz.com/icons/baladruz.png">

  <!-- iOS meta tags & icons -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="baladroz">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png"/>

  <title>بلدروز - منصة الإعلانات المحلية</title>
  <link rel="manifest" href="manifest.json">
  
  <!-- Dynamic Meta Tags Script -->
  <script>
    window.updateProductMeta = function(productId, title, description, imageUrl) {
      // Update title
      document.title = title + ' - بلدروز';
      
      // Update existing meta tags or create new ones
      function updateOrCreateMeta(property, content, isProperty = true) {
        const attribute = isProperty ? 'property' : 'name';
        let meta = document.querySelector(`meta[${attribute}="${property}"]`);
        if (!meta) {
          meta = document.createElement('meta');
          meta.setAttribute(attribute, property);
          document.head.appendChild(meta);
        }
        meta.setAttribute('content', content);
      }
      
      // Update Open Graph tags
      updateOrCreateMeta('og:title', title);
      updateOrCreateMeta('og:description', description);
      updateOrCreateMeta('og:image', imageUrl);
      updateOrCreateMeta('og:url', `https://baladruz.com/#/product/${productId}`);
      
      // Update Twitter tags
      updateOrCreateMeta('twitter:title', title, false);
      updateOrCreateMeta('twitter:description', description, false);
      updateOrCreateMeta('twitter:image', imageUrl, false);
      
      // Update regular description
      updateOrCreateMeta('description', description, false);
    };
    
    // Update meta tags based on URL hash on page load
    window.addEventListener('load', function() {
      const hash = window.location.hash;
      if (hash.includes('/product/')) {
        // Extract product ID from hash
        const productIdMatch = hash.match(/#\/product\/(.+)$/);
        if (productIdMatch) {
          const productId = productIdMatch[1];
          // Meta tags will be updated by Flutter when product data is loaded
        }
      }
    });
  </script>
</head>
<body>
  <script src="flutter_bootstrap.js" async></script>
</body>
</html>
